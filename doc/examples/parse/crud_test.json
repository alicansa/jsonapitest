{
  "suite": {
    "name": "Parse CRUD",
    "tests": [
      {
        "name": "create_get_list_update_delete",
        "description": "You can create a Parse object, get and list it, update its name, and then delete it",
        "api_calls": [
          {
            "request": {
              "path": "/classes/GameScore",
              "method": "POST",
              "params": "{{users.joe}}"
            },
            "status": 201,
            "assert": {
              "select": "body",
              "schema": {
                "type": "object",
                "properties": {
                  "createdAt": {"type": "string"},
                  "objectId": {"type": "string"}
                },
                "required": ["createdAt", "objectId"],
                "additionalProperties": false
              }
            },
            "save": {
              "users.joe.objectId": "body.objectId"
            }
          },
          {
            "request": "/classes/GameScore/{{users.joe.objectId}}",
            "assert": [
              {
                "select": "body",
                "schema": "{{schema.user}}"
              },
              {
              "select": "body",
              "equal_keys": "{{users.joe}}"
              }
            ]
          },
          {
            "request": {
              "path": "/classes/GameScore",
              "params": {
                "order": "-created_at",
                "limit": 3
              }
            },
            "assert": [
              {
                "select": "body.results.0",
                "schema": "{{schema.user}}"
              },
              {
                "select": "body.results",
                "length": 3
              },
              {
                "select": "body.results.0.objectId",
                "equal": "{{users.joe.objectId}}"
              }
            ]
          },
          {
            "request": {
              "path": "/classes/GameScore/{{users.joe.objectId}}",
              "method": "PUT",
              "params": {
                "playerName": "New name"
              }
            }
          },
          {
            "request": "/classes/GameScore/{{users.joe.objectId}}",
            "assert": {
              "select": "body.playerName",
              "equal": "New name"
            }
          },
          {
            "request": {
              "path": "/classes/GameScore/{{users.joe.objectId}}",
              "method": "DELETE"
            }
          },
          {
            "request": "/classes/GameScore/{{users.joe.objectId}}",
            "status": 404
          }          
        ]
      }
    ]
  }
}
